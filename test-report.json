
> nestjs-boilerplate@1.2.0 test:e2e
> env-cmd jest --config ./test/jest-e2e.json test/auth/token-introspection.e2e-spec.ts --json

PASS test/auth/token-introspection.e2e-spec.ts
  Token Introspection Endpoint (RFC 7662)
    POST /api/v1/auth/introspect
      Authentication
        ✓ should return 401 without service API key (3 ms)
        ✓ should return 401 with invalid service API key (2 ms)
        ✓ should accept valid service API key (9 ms)
      Request Format (RFC 7662)
        ✓ should accept JSON request body (3 ms)
        ✓ should accept application/x-www-form-urlencoded (RFC 7662) (2 ms)
        ✓ should require token parameter (2 ms)
      Valid Token Response
        ✓ should return active: true for valid token (5 ms)
        ✓ should include all RFC 7662 standard fields (3 ms)
        ✓ should include optional metadata fields (2 ms)
      Invalid Token Response
        ✓ should return active: false for expired token (1 ms)
        ✓ should return active: false for malformed token (2 ms)
        ✓ should return active: false for empty token (1 ms)
      Revoked Token Response
        ✓ should return active: false after logout (120 ms)
      Token Type Hint
        ✓ should accept token_type_hint parameter (9 ms)
        ✓ should accept refresh_token hint (11 ms)
      HIPAA Compliance
        ✓ should not include PHI in response (10 ms)
        ✓ should log introspection events (audit trail) (9 ms)
      Rate Limiting
        ○ skipped should enforce rate limiting (100 requests per minute)

Test Suites: 1 passed, 1 total
Tests:       1 skipped, 17 passed, 18 total
Snapshots:   0 total
Time:        2.145 s
Ran all test suites matching test/auth/token-introspection.e2e-spec.ts.
{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":1,"numPassedTests":17,"numPendingTestSuites":0,"numPendingTests":1,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":18,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1763758935120,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Authentication"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Authentication should return 401 without service API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937063,"status":"passed","title":"should return 401 without service API key"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Authentication"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Authentication should return 401 with invalid service API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937066,"status":"passed","title":"should return 401 with invalid service API key"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Authentication"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Authentication should accept valid service API key","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937068,"status":"passed","title":"should accept valid service API key"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Request Format (RFC 7662)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Request Format (RFC 7662) should accept JSON request body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1763758937077,"status":"passed","title":"should accept JSON request body"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Request Format (RFC 7662)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Request Format (RFC 7662) should accept application/x-www-form-urlencoded (RFC 7662)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1763758937080,"status":"passed","title":"should accept application/x-www-form-urlencoded (RFC 7662)"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Request Format (RFC 7662)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Request Format (RFC 7662) should require token parameter","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937082,"status":"passed","title":"should require token parameter"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Valid Token Response"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Valid Token Response should return active: true for valid token","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1763758937084,"status":"passed","title":"should return active: true for valid token"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Valid Token Response"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Valid Token Response should include all RFC 7662 standard fields","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1763758937089,"status":"passed","title":"should include all RFC 7662 standard fields"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Valid Token Response"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Valid Token Response should include optional metadata fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1763758937092,"status":"passed","title":"should include optional metadata fields"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Invalid Token Response"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Invalid Token Response should return active: false for expired token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1763758937095,"status":"passed","title":"should return active: false for expired token"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Invalid Token Response"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Invalid Token Response should return active: false for malformed token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1763758937096,"status":"passed","title":"should return active: false for malformed token"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Invalid Token Response"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Invalid Token Response should return active: false for empty token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1763758937098,"status":"passed","title":"should return active: false for empty token"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Revoked Token Response"],"duration":120,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Revoked Token Response should return active: false after logout","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1763758937099,"status":"passed","title":"should return active: false after logout"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Token Type Hint"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Token Type Hint should accept token_type_hint parameter","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1763758937219,"status":"passed","title":"should accept token_type_hint parameter"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Token Type Hint"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Token Type Hint should accept refresh_token hint","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937228,"status":"passed","title":"should accept refresh_token hint"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","HIPAA Compliance"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect HIPAA Compliance should not include PHI in response","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1763758937240,"status":"passed","title":"should not include PHI in response"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","HIPAA Compliance"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect HIPAA Compliance should log introspection events (audit trail)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937250,"status":"passed","title":"should log introspection events (audit trail)"},{"ancestorTitles":["Token Introspection Endpoint (RFC 7662)","POST /api/v1/auth/introspect","Rate Limiting"],"duration":null,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Introspection Endpoint (RFC 7662) POST /api/v1/auth/introspect Rate Limiting should enforce rate limiting (100 requests per minute)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1763758937259,"status":"pending","title":"should enforce rate limiting (100 requests per minute)"}],"endTime":1763758937260,"message":"","name":"/Users/joelmartinez/Documents/dropdev/keystone-core-api/test/auth/token-introspection.e2e-spec.ts","startTime":1763758935256,"status":"focused","summary":""}],"wasInterrupted":false}
